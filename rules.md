# Правила выполнения работы #

На выполнение работы даётся 4 часа, начало 12.06.2015 в 17:00, конец в
21:00.

Выполненная работа должна быть отправлена во вложении письмом на мой
адрес электронной почты не позднее указанного срока.

При опоздании с отправлением работы за каждую минуту опоздания (полную
или неполную) снимается один балл (например, если работа отправлена с
опозданием на 00:02:17, то снимается три балла).

Вариант работы выбирается в соответствии со списком студентов группы
(номер варианта соответствует номеру в списке):

 1. Александров Максим Анатольевич.
 2. Вяткин Роман Владимирович.
 3. Габдрахманов Ринат Зинурович.
 4. Горячих Константин Александрович.
 5. Гребенщикова Дарья Григорьевна.
 6. Григорьева Алина Александровна.
 7. Григорьева Дарья Васильевна.
 8. Ившина Ольга Николаевна.
 9. Карманов Дмитрий Сергеевич.
10. Кубина Дарья Владимировна.
11. Перевозчикова Анастасия Сергеевна.
12. Самарин Павел Федорович.
13. Сарапук Полина Алексеевна.
14. Сорокин Дмитрий Александрович.
15. Тарасов Александр Алексеевич.
16. Шемякин Анатолий Игоревич.
17. Шигапова Юлия Линаровна.
18. Шмакова Наталья Владимировна.
19. Ясакова Алёна Александровна.

Работа, сделанная не для своего варианта, не засчитывается (выставляется
ноль баллов).

Представленная работа должна состоять из одного или нескольких (на выбор
сдающего) SQL-файлов (поместить все инструкции в один файл или несколько
отдельных).

База данных должна быть названа в соответствии со следующим правилом:
`db##`, где `##` --- номер варианта, т.е., имена должны быть такими:

```
db01
db02
....
db19
```

SQL-файлы должны именоваться по правилу: `db##-##.sql`, где `db##` ---
имя базы данных (см. указания выше), вторая пара `##` --- порядковый
номер SQL-файла (например, `db07-02.sql` означает, что это второй
SQL-файл для БД `db07` (т.е., седьмого варианта работы). Порядок
нумерации должен соответствовать порядку выполнения SQL-файлов, и
проверяться они будут именно в указанном порядке (что может привести к
ошибке, если порядок следования перепутан). Поэтому при перепутывании
нумерации могут возникнуть ошибки, влияющие на последующий результат,
что приведёт к незасчитыванию всех тех частей работы, которые приводят к
ошибке выполнения (перепутывание местами двух файлов может привести к
ошибочному исполнению **всех** последующих). Поэтому рекомендуется
использовать для всех SQL-инструкций единственный SQL-файл, чтобы
избежать возможных ошибок по данной причине. Предположим, например, что
были созданы следующие SQL-файлы:

`db07-01.sql`:
```sql
CREATE DATABASE db07;
```

`db07-02.sql`:
```sql
USE db07;
```

`db07-03.sql`:
```sql
CREATE TABLE hob
(
	id INT UNSIGNED NOT NULL AUTO_INCREMENT,
	name VARCHAR(30) NOT NULL,
	PRIMARY KEY (id)
);
```

`db07-04.sql`:
```sql
INSERT INTO hob VALUES
	(NULL, 'Bilbo Baggins'),
	(NULL, 'Frodo Baggins'),
	(NULL, 'Samwise Gamgee'),
	(NULL, 'Peregrin Took');
```

`db07-05.sql`:
```sql
SELECT
	id AS `#`,
	name AS `Name`
	FROM hob;
```

Если перепутать содержимое первых двух, то почти все запросы из этих
файлов не будут выполнены (если БД `db07` не была создана ранее, то
будет лишь создана она, все остальные запросы выдадут ошибку
выполнения). Таким образом, рекомендуемый способ действий: создать
единственный SQL-файл, который может иметь примерно следующий вид:

`db07-01.sql`:
```sql
--
-- удаляем БД db07, если она существует,
-- для проверки того, что все инструкции
-- расположены в нужном порядке
-- и корректно выполняются
--
DROP DATABASE IF EXISTS db07;
--
-- создаём БД
--
CREATE DATABASE db07;
--
-- делаем её активной
--
USE db07;
--
-- создаём таблицу для хранения данных о хоббитах
-- id   - суррогатный первичный ключ
-- name - имя хоббита
--
CREATE TABLE hob
(
	id INT UNSIGNED NOT NULL AUTO_INCREMENT,
	name VARCHAR(30) NOT NULL,
	PRIMARY KEY (id)
);
--
-- делаем вставку строк в таблицу хоббитов
--
INSERT INTO hob VALUES
	(NULL, 'Bilbo Baggins'),
	(NULL, 'Frodo Baggins'),
	(NULL, 'Samwise Gamgee'),
	(NULL, 'Peregrin Took');
--
-- выбираем всех хоббитов из таблицы
--
SELECT
	id AS `#`,
	name AS `Name`
	FROM hob;
--
-- и так далее...
--
```

Кроме того, после завершения выполнения работы рекомендуется сделать
проверку своего SQL-файла (или файлов, если их будет несколько)
следующим образом: в `MySQL monitor` выполнить (например, для того же
седьмого варианта работы):

```
mysql> \. db07-01.sql
mysql> \. db07-02.sql
...
```
(все, сколько будет сделано, в порядке нумерации). Именно с целью
проверки сделанных файлов рекомендуется использовать инструкцию
```sql
DROP DATABASE IF EXISTS db07;
```
в самом начале, перед всеми остальными действиями.

Работу можно выполнять и в `MySQL monitor`:

```
mysql> DROP DATABASE IF EXISTS db07;
Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql> CREATE DATABASE db07;
Query OK, 1 row affected (0.00 sec)

mysql> USE db07;
Database changed

mysql> CREATE TABLE hob
    -> (
    -> id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    -> name VARCHAR(30) NOT NULL,
    -> PRIMARY KEY (id)
    -> );
Query OK, 0 rows affected (0.01 sec)

mysql> INSERT INTO hob VALUES
    -> (NULL, 'Bilbo Baggins'),
    -> (NULL, 'Frodo Baggins'),
    -> (NULL, 'Samwise Gamgee'),
    -> (NULL, 'Peregrin Took');
Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> SELECT
    -> id AS `#`,
    -> name AS `Name`
    -> FROM hob;
+---+----------------+
| # | Name           |
+---+----------------+
| 1 | Bilbo Baggins  |
| 2 | Frodo Baggins  |
| 3 | Samwise Gamgee |
| 4 | Peregrin Took  |
+---+----------------+
4 rows in set (0.00 sec)
```

И т.д., после чего выделить и скопировать в буфер обмена из окна
терминала все запросы, вставить содержимое буфера в текстовый редактор,
убрать лишнее (результаты выполнения запросов и приглашения программы
`MySQL monitor`, в частности), отформатировать код запросов и сохранить
в SQL-файл.

Работы должны быть выполнены с использованием рабочей среды,
настроенной по данной [инструкции][setupenv].

[setupenv]: https://github.com/AVKorotkov/setupenv

Создавать SQL-файлы можно в любом из представленных в рабочей среде
редакторов: `gedit`, `KWrite`, `nano` или любом другом из представленных
там, а также в `MySQL Workbench`. При использовании последнего
происходит проверка правильности синтаксиса на ошибки, запросы на
выполнение можно передавать прямо из этой программы, результат
выполнения передаётся туда же. Для её использования в качестве редактора
запросов, следует:

1. Предварительно в `MySQL monitor` создать БД (пример ниже для того же
   седьмого варианта):

```
mysql> CREATE DATABASE db07;
Query OK, 1 row affected (0.00 sec)
```
(после чего можно покинуть `MySQL monitor`).

2. После запуска `MySQL Workbench` произвести двойной щелчок на
   созданном ранее соединении `localhost`: оно расположено на стартовом
   окне программы в области `Open Connection to Start Querying`. При
   этом сервер `MySQL` может запросить пароль пользователя `MySQL`, его
   следует ввести (пароль пользователя `dbuser`).

3. Далее открывается окно редактора запросов, где их можно вводить и
   запускать на выполнение (все, выделенные или под курсором ---
   выбирается в меню или на панели инструментов). Предварительно, до
   составления запросов, следует выбрать БД (в левой панели окна
   редактора), сделав на ней двойной щелчок.

4. Всё содержимое окна запросов можно сохранить в файл (например,
  `db07-01.sql`).


В письме должны быть указаны имя, фамилия, отчество студента,
приславшего работу. К письму должны быть добавлены во вложении все
сделанные SQL-файлы. Кроме того, можно приложить текстовый (в формате
`Plain Text`) файл с пояснениями к сделанной работе, если пояснения
могут быть сочтены полезными (рекомендуется все пояснения делать в виде
комментариев внутри SQL-файла как на примере выше). При вложении такого
файла, он доложен иметь название `db##.txt`, где `##` --- номер
варианта. Никакие иные вложения (в других форматах, неверно названные и
т.д.) к рассмотрению не принимаются, они будут просто удаляться. Длины
строк **во всех файлах** не должны превышать 80 символов (рекомендуется
использовать 72).

Крайне рекомендуется заранее проверить, как всё работает --- до начала
проведения контрольной.
